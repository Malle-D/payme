import 'package:flutter/material.dart';import 'package:flutter_bloc/flutter_bloc.dart';import 'package:google_fonts/google_fonts.dart';import 'package:payme_clone/utils/utils.dart';import '../../widgets/btn_search_widget.dart';import 'bloc/theme_bloc.dart';class ThemePage extends StatelessWidget {  const ThemePage({super.key});  @override  Widget build(BuildContext context) {    final maxWith = MediaQuery.of(context).size.width;    return BlocProvider(      create: (context) => ThemeBloc(),      child: BlocBuilder<ThemeBloc, ThemeState>(        builder: (context, state) {          return Scaffold(              backgroundColor: const Color(0xFF20202c),              appBar: AppBar(                leading: const Icon(                  Icons.arrow_back_rounded,                  color: Colors.grey,                ),                backgroundColor: const Color(0xFF20202c),                title: Text(                  'Mavzu',                  style: GoogleFonts.poppins(                      color: Colors.white,                      fontSize: 18,                      fontWeight: FontWeight.w600),                ),              ),              body: Stack(                children: [                  Column(                    children: [                      Flexible(                          flex: 5,                          child: Padding(                            padding: const EdgeInsets.only(                                top: 8.0, left: 15, right: 15),                            child: Stack(                              children: [                                Column(                                  children: [                                    Flexible(                                        flex: 2,                                        child: Container(                                          height: double.infinity,                                          decoration: const BoxDecoration(                                              color: Color(tealColor),                                              borderRadius: BorderRadius.only(                                                  topLeft: Radius.circular(10),                                                  topRight:                                                      Radius.circular(10))),                                          child: Stack(                                            children: [                                              ///Image                                              if (state is ChangeBgState)                                                ClipRRect(                                                    borderRadius:                                                        const BorderRadius.only(                                                            topRight:                                                                Radius.circular(                                                                    10),                                                            topLeft:                                                                Radius.circular(                                                                    10)),                                                    child: Image.asset(                                                        state.str,                                                        width: double.infinity,                                                        height: double.infinity,                                                        fit: BoxFit.fill)),                                              Column(                                                children: [                                                  const Padding(                                                    padding:                                                        EdgeInsets.all(12.0),                                                    child: Row(                                                      children: [                                                        Icon(                                                          Icons.menu,                                                          color: Colors.white,                                                          size: 30,                                                        ),                                                        Spacer(),                                                        Icon(                                                          Icons                                                              .notifications_none_rounded,                                                          color: Colors.white,                                                          size: 30,                                                        ),                                                      ],                                                    ),                                                  ),                                                  SizedBox(                                                    width: maxWith,                                                    child: Column(                                                      crossAxisAlignment:                                                          CrossAxisAlignment                                                              .center,                                                      children: [                                                        const SizedBox(                                                          height: 10,                                                        ),                                                        Text(                                                          'Balansni berkitish',                                                          style: GoogleFonts                                                              .poppins(                                                                  fontSize: 13,                                                                  fontWeight:                                                                      FontWeight                                                                          .w500,                                                                  color: Colors                                                                      .white),                                                        ),                                                        const SizedBox(                                                            height: 5),                                                        Row(                                                          mainAxisAlignment:                                                              MainAxisAlignment                                                                  .center,                                                          children: [                                                            Image.asset(                                                              'assets/icons/ic_invisible_24.png',                                                              width: 20,                                                              height: 20,                                                            ),                                                            const SizedBox(                                                                width:                                                                    primaryPadding),                                                            Row(                                                              crossAxisAlignment:                                                                  CrossAxisAlignment                                                                      .end,                                                              children: [                                                                Text(                                                                  '********',                                                                  style: GoogleFonts.poppins(                                                                      fontSize:                                                                          30,                                                                      fontWeight:                                                                          FontWeight                                                                              .w600,                                                                      color: Colors                                                                          .white),                                                                ),                                                              ],                                                            ),                                                            const SizedBox(                                                              width:                                                                  primaryPadding,                                                            ),                                                            const Icon(                                                              Icons                                                                  .more_vert_rounded,                                                              color:                                                                  Colors.white,                                                            )                                                          ],                                                        ),                                                        const SizedBox(                                                            height:                                                                primaryPadding),                                                        Row(                                                          mainAxisAlignment:                                                              MainAxisAlignment                                                                  .spaceEvenly,                                                          children: [                                                            Column(                                                              children: [                                                                Container(                                                                  width: 70,                                                                  height: 70,                                                                  decoration: BoxDecoration(                                                                      boxShadow: const <BoxShadow>[                                                                        BoxShadow(                                                                            color: Colors                                                                                .black54,                                                                            blurRadius:                                                                                1.0,                                                                            offset:                                                                                Offset(0.0, 0.75))                                                                      ],                                                                      color: Colors                                                                          .white,                                                                      borderRadius:                                                                          BorderRadius.circular(                                                                              100)),                                                                  child: Center(                                                                    child:                                                                        Padding(                                                                      padding: const EdgeInsets                                                                          .all(                                                                          16.0),                                                                      child: Image                                                                          .asset(                                                                              'assets/icons/ic_card2_32.png'),                                                                    ),                                                                  ),                                                                ),                                                                const SizedBox(                                                                    height:                                                                        primaryPadding),                                                                Text(                                                                  'Kartalarim',                                                                  style: GoogleFonts.poppins(                                                                      fontSize:                                                                          12,                                                                      fontWeight:                                                                          FontWeight                                                                              .w500,                                                                      color: Colors                                                                          .white),                                                                ),                                                              ],                                                            ),                                                            Column(                                                              children: [                                                                Container(                                                                  width: 70,                                                                  height: 70,                                                                  decoration: BoxDecoration(                                                                      boxShadow: const <BoxShadow>[                                                                        BoxShadow(                                                                            color: Colors                                                                                .black54,                                                                            blurRadius:                                                                                1.0,                                                                            offset:                                                                                Offset(0.0, 0.75))                                                                      ],                                                                      color: Colors                                                                          .white,                                                                      borderRadius:                                                                          BorderRadius.circular(                                                                              100)),                                                                  child: Center(                                                                    child:                                                                        Padding(                                                                      padding: const EdgeInsets                                                                          .all(                                                                          11.0),                                                                      child: Image                                                                          .asset(                                                                              'assets/icons/ic_paymego.png'),                                                                    ),                                                                  ),                                                                ),                                                                const SizedBox(                                                                    height:                                                                        primaryPadding),                                                                Text(                                                                  'Payme GO',                                                                  style: GoogleFonts.poppins(                                                                      fontSize:                                                                          12,                                                                      fontWeight:                                                                          FontWeight                                                                              .w500,                                                                      color: Colors                                                                          .white),                                                                ),                                                              ],                                                            ),                                                            Column(                                                              children: [                                                                Container(                                                                  width: 70,                                                                  height: 70,                                                                  decoration: BoxDecoration(                                                                      boxShadow: const <BoxShadow>[                                                                        BoxShadow(                                                                            color: Colors                                                                                .black54,                                                                            blurRadius:                                                                                1.0,                                                                            offset:                                                                                Offset(0.0, 0.75))                                                                      ],                                                                      color: Colors                                                                          .white,                                                                      borderRadius:                                                                          BorderRadius.circular(                                                                              100)),                                                                  child: Center(                                                                    child:                                                                        Padding(                                                                      padding: const EdgeInsets                                                                          .all(                                                                          18.0),                                                                      child: Image                                                                          .asset(                                                                              'assets/icons/ic_scanner_32.png'),                                                                    ),                                                                  ),                                                                ),                                                                const SizedBox(                                                                    height:                                                                        primaryPadding),                                                                Text(                                                                  'QR to\'lov',                                                                  style: GoogleFonts.poppins(                                                                      fontSize:                                                                          12,                                                                      fontWeight:                                                                          FontWeight                                                                              .w500,                                                                      color: Colors                                                                          .white),                                                                ),                                                              ],                                                            ),                                                          ],                                                        ),                                                      ],                                                    ),                                                  ),                                                ],                                              ),                                            ],                                          ),                                        )),                                    Flexible(                                        child: Stack(                                      children: [                                        if (state is ChangeBgState)                                          RotatedBox(                                              quarterTurns: 2,                                              child: Image.asset(state.str,                                                  width: double.infinity,                                                  height: double.infinity,                                                  fit: BoxFit.fill)),                                        Container(                                          decoration: const BoxDecoration(                                              color: Color(0xFF20202c),                                              borderRadius: BorderRadius.only(                                                  topLeft: Radius.circular(25),                                                  topRight:                                                      Radius.circular(25))),                                        ),                                        Padding(                                          padding: const EdgeInsets.only(                                              top: 30, right: 15, left: 15),                                          child: buttonSearchWidget(() {}),                                        ),                                      ],                                    )),                                  ],                                )                              ],                            ),                          )),                      Flexible(                          flex: 3,                          child: Container(                            decoration: const BoxDecoration(                                color: Color(0xFF282834),                                borderRadius: BorderRadius.only(                                    topRight: Radius.circular(20),                                    topLeft: Radius.circular(20))),                            child: Column(                              children: [                                Padding(                                  padding: const EdgeInsets.only(                                      top: 30, right: 20, left: 20),                                  child: Row(                                    mainAxisAlignment:                                        MainAxisAlignment.spaceAround,                                    children: [                                      GestureDetector(                                        onTap: () {                                          context.read<ThemeBloc>().add(                                              ChangeBgEvent(                                                  'assets/images/img_bg1.jpg'));                                          // MyPreference.setMainImage(                                          //     'assets/images/img_bg1.jpg');                                        },                                        child: ClipRRect(                                            borderRadius:                                                BorderRadius.circular(100),                                            child: Image.asset(                                              'assets/images/img_bg1.jpg',                                              width: 80,                                              height: 80,                                              fit: BoxFit.fill,                                            )),                                      ),                                      GestureDetector(                                        onTap: () {                                          context.read<ThemeBloc>().add(                                              ChangeBgEvent(                                                  'assets/images/img_bg2.jpg'));                                          // MyPreference.setMainImage(                                          //     'assets/images/img_bg2.jpg');                                        },                                        child: ClipRRect(                                            borderRadius:                                                BorderRadius.circular(100),                                            child: Image.asset(                                              'assets/images/img_bg2.jpg',                                              width: 80,                                              height: 80,                                              fit: BoxFit.fill,                                            )),                                      ),                                      GestureDetector(                                        onTap: () {                                          context.read<ThemeBloc>().add(                                              ChangeBgEvent(                                                  'assets/images/img_bg3.jpg'));                                          // MyPreference.setMainImage(                                          //     'assets/images/img_bg3.jpg');                                        },                                        child: ClipRRect(                                            borderRadius:                                                BorderRadius.circular(100),                                            child: Image.asset(                                              'assets/images/img_bg3.jpg',                                              width: 80,                                              height: 80,                                              fit: BoxFit.fill,                                            )),                                      ),                                    ],                                  ),                                )                              ],                            ),                          )),                    ],                  )                ],              ));        },      ),    );  }}